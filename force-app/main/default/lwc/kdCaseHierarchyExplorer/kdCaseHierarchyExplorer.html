<template>
  <!-- Cache buster: v3.0.0 -->
  <lightning-card variant="Narrow" title="Case Hierarchy">
      <!-- Data table -->
      <template if:true={treeData.data}>
          <lightning-tree-grid
              key-field="id"
              columns={columns}
              data={treeData.data}
              expanded-rows={expandedRows}
              hide-checkbox-column
              onrowtoggle={handleToggle}
              onrowclick={handleRowClick}>
          </lightning-tree-grid>
      </template>

      <!-- Spinner -->
      <template if:true={treeData.isLoading}>
          <div class="slds-p-around_medium slds-align_absolute-center">
              <lightning-spinner size="small"></lightning-spinner>
          </div>
      </template>

      <!-- Inline error (replaces <c:error-panel>) -->
      <template if:true={hasError}>
          <div class="slds-text-color_error slds-p-around_medium">
              {errorMessage}
          </div>
      </template>
  </lightning-card>
</template>
